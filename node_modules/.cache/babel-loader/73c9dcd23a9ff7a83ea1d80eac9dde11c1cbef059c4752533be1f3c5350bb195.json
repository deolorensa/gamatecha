{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createVNode as _createVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ea40744\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mx-auto p-6\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-2xl font-bold mb-4\"\n}, \"Home\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-xl font-semibold mb-4\"\n}, \"Edit User\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"edit-username\",\n  class: \"block text-sm font-medium text-gray-700\"\n}, \"Username\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"mb-4\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"edit-email\",\n  class: \"block text-sm font-medium text-gray-700\"\n}, \"Email\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"flex justify-end\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"bg-blue-500 text-white px-4 py-2 rounded\"\n}, \" Update \", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-xl font-semibold mb-4\"\n}, \"Delete User\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Are you sure you want to delete this user?\", -1 /* HOISTED */));\nconst _hoisted_12 = {\n  class: \"flex justify-end mt-4\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_modal = _resolveComponent(\"modal\");\n  const _component_vg_cell = _resolveComponent(\"vg-cell\");\n  const _component_vue_good_table = _resolveComponent(\"vue-good-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" Modal untuk Edit \"), $setup.isEditModalOpen ? (_openBlock(), _createBlock(_component_modal, {\n    key: 0,\n    onClose: $setup.closeEditModal\n  }, {\n    default: _withCtx(() => [_hoisted_3, _createElementVNode(\"form\", {\n      onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.updateUser && $setup.updateUser(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      id: \"edit-username\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.editedUser.username = $event),\n      class: \"mt-1 p-2 border rounded-md w-full\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.editedUser.username]])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n      type: \"email\",\n      id: \"edit-email\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.editedUser.email = $event),\n      class: \"mt-1 p-2 border rounded-md w-full\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.editedUser.email]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[2] || (_cache[2] = (...args) => $setup.closeEditModal && $setup.closeEditModal(...args)),\n      class: \"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n    }, \" Cancel \")])], 32 /* NEED_HYDRATION */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClose\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Modal untuk Delete \"), $setup.isDeleteModalOpen ? (_openBlock(), _createBlock(_component_modal, {\n    key: 1,\n    onClose: $setup.closeDeleteModal\n  }, {\n    default: _withCtx(() => [_hoisted_10, _hoisted_11, _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"button\", {\n      onClick: _cache[4] || (_cache[4] = (...args) => $setup.deleteUser && $setup.deleteUser(...args)),\n      class: \"bg-red-500 text-white px-4 py-2 rounded\"\n    }, \" Delete \"), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: _cache[5] || (_cache[5] = (...args) => $setup.closeDeleteModal && $setup.closeDeleteModal(...args)),\n      class: \"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n    }, \" Cancel \")])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClose\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Tabel menggunakan vue-good-table-next \"), _createVNode(_component_vue_good_table, {\n    columns: $setup.columns,\n    rows: $setup.apiData,\n    paginate: true,\n    lineNumbers: true,\n    search: true\n  }, {\n    \"table-row\": _withCtx(props => [_createVNode(_component_vg_cell, null, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(props.row.username), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_vg_cell, null, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString(props.row.email), 1 /* TEXT */)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createVNode(_component_vg_cell, null, {\n      default: _withCtx(() => [_createElementVNode(\"button\", {\n        onClick: $event => $setup.openEditModal(props.row),\n        class: \"bg-blue-500 text-white px-2 py-1 rounded\"\n      }, \" Edit \", 8 /* PROPS */, _hoisted_13), _createElementVNode(\"button\", {\n        onClick: $event => $setup.openDeleteModal(props.row),\n        class: \"bg-red-500 text-white px-2 py-1 rounded ml-2\"\n      }, \" Delete \", 8 /* PROPS */, _hoisted_14)]),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"rows\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","$setup","isEditModalOpen","_createBlock","_component_modal","key","onClose","closeEditModal","default","_withCtx","_hoisted_3","onSubmit","_cache","_withModifiers","args","updateUser","_hoisted_4","_hoisted_5","id","$event","_ctx","editedUser","username","required","_hoisted_6","_hoisted_7","email","_hoisted_8","_hoisted_9","onClick","_","isDeleteModalOpen","closeDeleteModal","_hoisted_10","_hoisted_11","_hoisted_12","deleteUser","_createVNode","_component_vue_good_table","columns","rows","apiData","paginate","lineNumbers","search","props","_component_vg_cell","_createTextVNode","_toDisplayString","row","openEditModal","_hoisted_13","openDeleteModal","_hoisted_14"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">Home</h1>\n\n    <!-- Modal untuk Edit -->\n    <modal v-if=\"isEditModalOpen\" @close=\"closeEditModal\">\n      <h2 class=\"text-xl font-semibold mb-4\">Edit User</h2>\n      <form @submit.prevent=\"updateUser\">\n        <div class=\"mb-4\">\n          <label\n            for=\"edit-username\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Username</label\n          >\n          <input\n            type=\"text\"\n            id=\"edit-username\"\n            v-model=\"editedUser.username\"\n            class=\"mt-1 p-2 border rounded-md w-full\"\n            required\n          />\n        </div>\n        <div class=\"mb-4\">\n          <label\n            for=\"edit-email\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Email</label\n          >\n          <input\n            type=\"email\"\n            id=\"edit-email\"\n            v-model=\"editedUser.email\"\n            class=\"mt-1 p-2 border rounded-md w-full\"\n            required\n          />\n        </div>\n        <div class=\"flex justify-end\">\n          <button\n            type=\"submit\"\n            class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n          >\n            Update\n          </button>\n          <button\n            type=\"button\"\n            @click=\"closeEditModal\"\n            class=\"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </modal>\n\n    <!-- Modal untuk Delete -->\n    <modal v-if=\"isDeleteModalOpen\" @close=\"closeDeleteModal\">\n      <h2 class=\"text-xl font-semibold mb-4\">Delete User</h2>\n      <p>Are you sure you want to delete this user?</p>\n      <div class=\"flex justify-end mt-4\">\n        <button\n          @click=\"deleteUser\"\n          class=\"bg-red-500 text-white px-4 py-2 rounded\"\n        >\n          Delete\n        </button>\n        <button\n          type=\"button\"\n          @click=\"closeDeleteModal\"\n          class=\"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n        >\n          Cancel\n        </button>\n      </div>\n    </modal>\n\n    <!-- Tabel menggunakan vue-good-table-next -->\n    <vue-good-table\n      :columns=\"columns\"\n      :rows=\"apiData\"\n      :paginate=\"true\"\n      :lineNumbers=\"true\"\n      :search=\"true\"\n    >\n      <template v-slot:table-row=\"props\">\n        <vg-cell>{{ props.row.username }}</vg-cell>\n        <vg-cell>{{ props.row.email }}</vg-cell>\n        <vg-cell>\n          <button\n            @click=\"openEditModal(props.row)\"\n            class=\"bg-blue-500 text-white px-2 py-1 rounded\"\n          >\n            Edit\n          </button>\n          <button\n            @click=\"openDeleteModal(props.row)\"\n            class=\"bg-red-500 text-white px-2 py-1 rounded ml-2\"\n          >\n            Delete\n          </button>\n        </vg-cell>\n      </template>\n    </vue-good-table>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport { useAuthStore } from \"../stores/auth\";\nimport { VueGoodTable } from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\nimport { Modal } from \"vue3-modal\";\n\nexport default {\n  components: {\n    VueGoodTable,\n    Modal,\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const apiData = ref([]);\n    const editedUser = ref({ username: \"\", email: \"\" });\n    const isEditModalOpen = ref(false);\n    const isDeleteModalOpen = ref(false);\n    const userIdToDelete = ref(null);\n\n    const columns = [\n      { label: \"Username\", field: \"username\" },\n      { label: \"Email\", field: \"email\" },\n      { label: \"Actions\", sortable: false },\n    ];\n\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\n          \"http://103.164.54.252:8000/api/users\",\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n\n        apiData.value = response.data.map((user) => ({\n          username: user.username,\n          email: user.email,\n          id: user.id, // Untuk digunakan dalam fungsi edit dan delete\n        }));\n\n        console.log(apiData.value); // Output data ke konsol untuk memeriksa strukturnya\n      } catch (error) {\n        console.error(\"Failed to fetch data:\", error);\n      }\n    };\n\n    const openEditModal = (user) => {\n      editedUser.value = { ...user };\n      isEditModalOpen.value = true;\n    };\n\n    const closeEditModal = () => {\n      editedUser.value = { username: \"\", email: \"\" };\n      isEditModalOpen.value = false;\n    };\n\n    const updateUser = async () => {\n      try {\n        await axios.put(\n          `http://103.164.54.252:8000/api/users/${editedUser.value.id}`,\n          editedUser.value,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        closeEditModal();\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to update user:\", error);\n      }\n    };\n\n    const openDeleteModal = (user) => {\n      userIdToDelete.value = user.id;\n      isDeleteModalOpen.value = true;\n    };\n\n    const closeDeleteModal = () => {\n      userIdToDelete.value = null;\n      isDeleteModalOpen.value = false;\n    };\n\n    const deleteUser = async () => {\n      try {\n        await axios.delete(\n          `http://103.164.54.252:8000/api/users/${userIdToDelete.value}`,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        closeDeleteModal();\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to delete user:\", error);\n      }\n    };\n\n    onMounted(() => {\n      fetchData();\n    });\n\n    return {\n      columns,\n      apiData,\n      isEditModalOpen,\n      isDeleteModalOpen,\n      openEditModal,\n      closeEditModal,\n      updateUser,\n      openDeleteModal,\n      closeDeleteModal,\n      deleteUser,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* Gaya tambahan jika diperlukan */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}