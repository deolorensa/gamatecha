{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"p-6\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-2xl font-bold mb-4\"\n}, \"Profile\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"bg-slate-600 h-60 rounded-2xl mb-4 flex items-center justify-center\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: \"https://gamatecha.com/wp-content/uploads/2024/06/Horizontal-Putih-Merah0-2-980x166.png\",\n  alt: \"asd\",\n  class: \"w-[1000px] p-10 object-cover mb-4 rounded\"\n})], -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"mt-4 flex space-x-4\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_edit_profile_modal = _resolveComponent(\"edit-profile-modal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"p\", null, \"Username: \" + _toDisplayString($setup.username), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.openEditModal && $setup.openEditModal(...args)),\n    class: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\"\n  }, \" Edit Profile \"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.deleteAccount && $setup.deleteAccount(...args)),\n    class: \"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700\"\n  }, \" Delete Account \")]), $setup.showEditModal ? (_openBlock(), _createBlock(_component_edit_profile_modal, {\n    key: 0,\n    username: $setup.username,\n    onClose: _cache[2] || (_cache[2] = $event => $setup.showEditModal = false),\n    onSave: $setup.updateProfile\n  }, null, 8 /* PROPS */, [\"username\", \"onSave\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","src","alt","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","$setup","username","_hoisted_4","onClick","_cache","args","openEditModal","deleteAccount","showEditModal","_createBlock","_component_edit_profile_modal","key","onClose","$event","onSave","updateProfile","_createCommentVNode"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/views/ProfileView.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">Profile</h1>\n    <div\n      class=\"bg-slate-600 h-60 rounded-2xl mb-4 flex items-center justify-center\"\n    >\n      <img\n        src=\"https://gamatecha.com/wp-content/uploads/2024/06/Horizontal-Putih-Merah0-2-980x166.png\"\n        alt=\"asd\"\n        class=\"w-[1000px] p-10 object-cover mb-4 rounded\"\n      />\n    </div>\n    <p>Username: {{ username }}</p>\n    <div class=\"mt-4 flex space-x-4\">\n      <button\n        @click=\"openEditModal\"\n        class=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\"\n      >\n        Edit Profile\n      </button>\n      <button\n        @click=\"deleteAccount\"\n        class=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700\"\n      >\n        Delete Account\n      </button>\n    </div>\n    <edit-profile-modal\n      v-if=\"showEditModal\"\n      :username=\"username\"\n      @close=\"showEditModal = false\"\n      @save=\"updateProfile\"\n    />\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport axios from \"axios\";\nimport { useAuthStore } from \"@/stores/auth\"; // Sesuaikan path dengan lokasi store Anda\nimport EditProfileModal from \"@/components/EditProfileModal.vue\"; // Path ke modal edit\n\nexport default {\n  components: {\n    EditProfileModal,\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const username = ref(authStore.username); // Mengakses username dari state store\n    const userId = ref(authStore.userId); // Asumsi userId juga ada di authStore\n    const showEditModal = ref(false);\n\n    const openEditModal = () => {\n      showEditModal.value = true;\n    };\n\n    const updateProfile = async (updatedProfile) => {\n      try {\n        await axios.put(\n          `http://103.164.54.252:8000/api/users/${userId.value}`,\n          updatedProfile,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        authStore.username = updatedProfile.username; // Update state store dengan data baru\n        username.value = updatedProfile.username; // Update local ref dengan data baru\n        showEditModal.value = false;\n        alert(\"Profile updated successfully!\");\n      } catch (error) {\n        console.error(\"Failed to update profile:\", error);\n        alert(\"Failed to update profile.\");\n      }\n    };\n\n    const deleteAccount = async () => {\n      const confirmation = confirm(\n        \"Are you sure you want to delete your account?\"\n      );\n      if (confirmation) {\n        try {\n          await axios.delete(\n            `http://103.164.54.252:8000/api/users/${userId.value}`,\n            {\n              headers: {\n                Authorization: `Bearer ${authStore.token}`,\n              },\n            }\n          );\n          authStore.logout(); // Log out user setelah menghapus akun\n          alert(\"Account deleted successfully!\");\n        } catch (error) {\n          console.error(\"Failed to delete account:\", error);\n          alert(\"Failed to delete account.\");\n        }\n      }\n    };\n\n    return {\n      username,\n      showEditModal,\n      openEditModal,\n      updateProfile,\n      deleteAccount,\n    };\n  },\n};\n</script>\n\n<style>\n/* CSS styling can be added here */\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAK;gCACdC,mBAAA,CAAgD;EAA5CD,KAAK,EAAC;AAAyB,GAAC,SAAO;gCAC3CC,mBAAA,CAQM;EAPJD,KAAK,EAAC;AAAqE,I,aAE3EC,mBAAA,CAIE;EAHAC,GAAG,EAAC,wFAAwF;EAC5FC,GAAG,EAAC,KAAK;EACTH,KAAK,EAAC;;;EAILA,KAAK,EAAC;AAAqB;;;uBAZlCI,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,UAAgD,EAChDC,UAQM,EACNN,mBAAA,CAA+B,WAA5B,YAAU,GAAAO,gBAAA,CAAGC,MAAA,CAAAC,QAAQ,kBACxBT,mBAAA,CAaM,OAbNU,UAaM,GAZJV,mBAAA,CAKS;IAJNW,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,MAAA,CAAAM,aAAA,IAAAN,MAAA,CAAAM,aAAA,IAAAD,IAAA,CAAa;IACrBd,KAAK,EAAC;KACP,gBAED,GACAC,mBAAA,CAKS;IAJNW,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,MAAA,CAAAO,aAAA,IAAAP,MAAA,CAAAO,aAAA,IAAAF,IAAA,CAAa;IACrBd,KAAK,EAAC;KACP,kBAED,E,GAGMS,MAAA,CAAAQ,aAAa,I,cADrBC,YAAA,CAKEC,6BAAA;IAhCNC,GAAA;IA6BOV,QAAQ,EAAED,MAAA,CAAAC,QAAQ;IAClBW,OAAK,EAAAR,MAAA,QAAAA,MAAA,MAAAS,MAAA,IAAEb,MAAA,CAAAQ,aAAa;IACpBM,MAAI,EAAEd,MAAA,CAAAe;qDA/BbC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}