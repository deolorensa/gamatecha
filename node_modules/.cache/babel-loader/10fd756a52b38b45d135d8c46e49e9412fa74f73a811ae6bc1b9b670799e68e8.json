{"ast":null,"code":"import { useAuthStore } from \"@/stores/auth\"; // Sesuaikan path dengan lokasi store Anda\nimport EditProfileModal from \"./EditProfileModal.vue\"; // Path ke modal edit\n\nexport default {\n  components: {\n    EditProfileModal\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const username = authStore.username; // Mengakses username dari state store\n    const userId = authStore.userId; // Asumsi userId juga ada di authStore\n    const showEditModal = ref(false);\n    const openEditModal = () => {\n      showEditModal.value = true;\n    };\n    const updateProfile = async updatedProfile => {\n      try {\n        await axios.put(`http://103.164.54.252:8000/api/users/${userId}`, updatedProfile, {\n          headers: {\n            Authorization: `Bearer ${authStore.token}`\n          }\n        });\n        authStore.username = updatedProfile.username; // Update state store dengan data baru\n        showEditModal.value = false;\n        alert(\"Profile updated successfully!\");\n      } catch (error) {\n        console.error(\"Failed to update profile:\", error);\n        alert(\"Failed to update profile.\");\n      }\n    };\n    const deleteAccount = async () => {\n      const confirmation = confirm(\"Are you sure you want to delete your account?\");\n      if (confirmation) {\n        try {\n          await axios.delete(`http://103.164.54.252:8000/api/users/${userId}`, {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`\n            }\n          });\n          authStore.logout(); // Log out user setelah menghapus akun\n          alert(\"Account deleted successfully!\");\n        } catch (error) {\n          console.error(\"Failed to delete account:\", error);\n          alert(\"Failed to delete account.\");\n        }\n      }\n    };\n    return {\n      username,\n      showEditModal,\n      openEditModal,\n      updateProfile,\n      deleteAccount\n    };\n  }\n};","map":{"version":3,"names":["useAuthStore","EditProfileModal","components","setup","authStore","username","userId","showEditModal","ref","openEditModal","value","updateProfile","updatedProfile","axios","put","headers","Authorization","token","alert","error","console","deleteAccount","confirmation","confirm","delete","logout"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/views/ProfileView.vue"],"sourcesContent":["<template>\n  <div class=\"p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">Profile</h1>\n    <div\n      class=\"bg-slate-600 h-60 rounded-2xl mb-4 flex items-center justify-center\"\n    >\n      <img\n        src=\"https://gamatecha.com/wp-content/uploads/2024/06/Horizontal-Putih-Merah0-2-980x166.png\"\n        alt=\"asd\"\n        class=\"w-[1000px] p-10 object-cover mb-4 rounded\"\n      />\n    </div>\n    <p>Username: {{ username }}</p>\n    <div class=\"mt-4 flex space-x-4\">\n      <button\n        @click=\"openEditModal\"\n        class=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-700\"\n      >\n        Edit Profile\n      </button>\n      <button\n        @click=\"deleteAccount\"\n        class=\"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-700\"\n      >\n        Delete Account\n      </button>\n    </div>\n    <edit-profile-modal\n      v-if=\"showEditModal\"\n      :username=\"username\"\n      @close=\"showEditModal = false\"\n      @save=\"updateProfile\"\n    />\n  </div>\n</template>\n\n<script>\nimport { useAuthStore } from \"@/stores/auth\"; // Sesuaikan path dengan lokasi store Anda\nimport EditProfileModal from \"./EditProfileModal.vue\"; // Path ke modal edit\n\nexport default {\n  components: {\n    EditProfileModal,\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const username = authStore.username; // Mengakses username dari state store\n    const userId = authStore.userId; // Asumsi userId juga ada di authStore\n    const showEditModal = ref(false);\n\n    const openEditModal = () => {\n      showEditModal.value = true;\n    };\n\n    const updateProfile = async (updatedProfile) => {\n      try {\n        await axios.put(\n          `http://103.164.54.252:8000/api/users/${userId}`,\n          updatedProfile,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        authStore.username = updatedProfile.username; // Update state store dengan data baru\n        showEditModal.value = false;\n        alert(\"Profile updated successfully!\");\n      } catch (error) {\n        console.error(\"Failed to update profile:\", error);\n        alert(\"Failed to update profile.\");\n      }\n    };\n\n    const deleteAccount = async () => {\n      const confirmation = confirm(\n        \"Are you sure you want to delete your account?\"\n      );\n      if (confirmation) {\n        try {\n          await axios.delete(`http://103.164.54.252:8000/api/users/${userId}`, {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          });\n          authStore.logout(); // Log out user setelah menghapus akun\n          alert(\"Account deleted successfully!\");\n        } catch (error) {\n          console.error(\"Failed to delete account:\", error);\n          alert(\"Failed to delete account.\");\n        }\n      }\n    };\n\n    return {\n      username,\n      showEditModal,\n      openEditModal,\n      updateProfile,\n      deleteAccount,\n    };\n  },\n};\n</script>\n\n<style>\n/* CSS styling can be added here */\n</style>\n"],"mappings":"AAqCA,SAASA,YAAW,QAAS,eAAe,EAAE;AAC9C,OAAOC,gBAAe,MAAO,wBAAwB,EAAE;;AAEvD,eAAe;EACbC,UAAU,EAAE;IACVD;EACF,CAAC;EACDE,KAAKA,CAAA,EAAG;IACN,MAAMC,SAAQ,GAAIJ,YAAY,CAAC,CAAC;IAChC,MAAMK,QAAO,GAAID,SAAS,CAACC,QAAQ,EAAE;IACrC,MAAMC,MAAK,GAAIF,SAAS,CAACE,MAAM,EAAE;IACjC,MAAMC,aAAY,GAAIC,GAAG,CAAC,KAAK,CAAC;IAEhC,MAAMC,aAAY,GAAIA,CAAA,KAAM;MAC1BF,aAAa,CAACG,KAAI,GAAI,IAAI;IAC5B,CAAC;IAED,MAAMC,aAAY,GAAI,MAAOC,cAAc,IAAK;MAC9C,IAAI;QACF,MAAMC,KAAK,CAACC,GAAG,CACb,wCAAwCR,MAAM,EAAE,EAChDM,cAAc,EACd;UACEG,OAAO,EAAE;YACPC,aAAa,EAAE,UAAUZ,SAAS,CAACa,KAAK;UAC1C;QACF,CACF,CAAC;QACDb,SAAS,CAACC,QAAO,GAAIO,cAAc,CAACP,QAAQ,EAAE;QAC9CE,aAAa,CAACG,KAAI,GAAI,KAAK;QAC3BQ,KAAK,CAAC,+BAA+B,CAAC;MACxC,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;QACjDD,KAAK,CAAC,2BAA2B,CAAC;MACpC;IACF,CAAC;IAED,MAAMG,aAAY,GAAI,MAAAA,CAAA,KAAY;MAChC,MAAMC,YAAW,GAAIC,OAAO,CAC1B,+CACF,CAAC;MACD,IAAID,YAAY,EAAE;QAChB,IAAI;UACF,MAAMT,KAAK,CAACW,MAAM,CAAC,wCAAwClB,MAAM,EAAE,EAAE;YACnES,OAAO,EAAE;cACPC,aAAa,EAAE,UAAUZ,SAAS,CAACa,KAAK;YAC1C;UACF,CAAC,CAAC;UACFb,SAAS,CAACqB,MAAM,CAAC,CAAC,EAAE;UACpBP,KAAK,CAAC,+BAA+B,CAAC;QACxC,EAAE,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;UACjDD,KAAK,CAAC,2BAA2B,CAAC;QACpC;MACF;IACF,CAAC;IAED,OAAO;MACLb,QAAQ;MACRE,aAAa;MACbE,aAAa;MACbE,aAAa;MACbU;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}