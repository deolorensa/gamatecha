{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-9ea40744\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container mx-auto p-6\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"text-2xl font-bold mb-4\"\n}, \"Home\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-xl font-semibold mb-4\"\n}, \"Edit User\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"mb-4\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"edit-username\",\n  class: \"block text-sm font-medium text-gray-700\"\n}, \"Username\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  class: \"mb-4\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"edit-email\",\n  class: \"block text-sm font-medium text-gray-700\"\n}, \"Email\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  class: \"flex justify-end\"\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"bg-blue-500 text-white px-4 py-2 rounded\"\n}, \" Update \", -1 /* HOISTED */));\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"text-xl font-semibold mb-4\"\n}, \"Delete User\", -1 /* HOISTED */));\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Are you sure you want to delete this user?\", -1 /* HOISTED */));\nconst _hoisted_12 = {\n  class: \"flex justify-end mt-4\"\n};\nconst _hoisted_13 = {\n  key: 0\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_modal = _resolveComponent(\"modal\");\n  const _component_vue_good_table = _resolveComponent(\"vue-good-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\" Modal untuk edit pengguna \"), _createVNode(_component_modal, {\n    modelValue: $setup.isEditModalOpen,\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.isEditModalOpen = $event)\n  }, {\n    default: _withCtx(() => [_hoisted_3, _createElementVNode(\"form\", {\n      onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $setup.updateUser && $setup.updateUser(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      id: \"edit-username\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.editedUser.username = $event),\n      class: \"mt-1 p-2 border rounded-md w-full\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.editedUser.username]])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n      type: \"email\",\n      id: \"edit-email\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.editedUser.email = $event),\n      class: \"mt-1 p-2 border rounded-md w-full\",\n      required: \"\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.editedUser.email]])]), _createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"button\", {\n      onClick: _cache[2] || (_cache[2] = (...args) => $setup.closeEditModal && $setup.closeEditModal(...args)),\n      class: \"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n    }, \" Cancel \")])], 32 /* NEED_HYDRATION */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" Modal untuk konfirmasi penghapusan \"), _createVNode(_component_modal, {\n    modelValue: $setup.isDeleteModalOpen,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $setup.isDeleteModalOpen = $event)\n  }, {\n    default: _withCtx(() => [_hoisted_10, _hoisted_11, _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"button\", {\n      onClick: _cache[5] || (_cache[5] = (...args) => $setup.deleteConfirmed && $setup.deleteConfirmed(...args)),\n      class: \"bg-red-500 text-white px-4 py-2 rounded\"\n    }, \" Delete \"), _createElementVNode(\"button\", {\n      onClick: _cache[6] || (_cache[6] = (...args) => $setup.closeDeleteModal && $setup.closeDeleteModal(...args)),\n      class: \"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n    }, \" Cancel \")])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\"]), _createCommentVNode(\" Tabel menggunakan vue-good-table \"), _createVNode(_component_vue_good_table, {\n    columns: $setup.columns,\n    rows: $setup.apiData,\n    \"pagination-options\": $setup.paginationOptions\n  }, {\n    \"table-row\": _withCtx(props => [props.column.field === 'actions' ? (_openBlock(), _createElementBlock(\"span\", _hoisted_13, [_createElementVNode(\"button\", {\n      onClick: $event => $setup.openEditModal(props.row),\n      class: \"bg-blue-500 text-white px-2 py-1 rounded\"\n    }, \" Edit \", 8 /* PROPS */, _hoisted_14), _createElementVNode(\"button\", {\n      onClick: $event => $setup.openDeleteModal(props.row.id),\n      class: \"bg-red-500 text-white px-2 py-1 rounded ml-2\"\n    }, \" Delete \", 8 /* PROPS */, _hoisted_15)])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_16, _toDisplayString(props.formattedRow[props.column.field]), 1 /* TEXT */))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"columns\", \"rows\", \"pagination-options\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","type","key","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_createVNode","_component_modal","modelValue","$setup","isEditModalOpen","_cache","$event","default","_withCtx","_hoisted_3","onSubmit","_withModifiers","args","updateUser","_hoisted_4","_hoisted_5","id","_ctx","editedUser","username","required","_hoisted_6","_hoisted_7","email","_hoisted_8","_hoisted_9","onClick","closeEditModal","_","isDeleteModalOpen","_hoisted_10","_hoisted_11","_hoisted_12","deleteConfirmed","closeDeleteModal","_component_vue_good_table","columns","rows","apiData","paginationOptions","props","column","field","_hoisted_13","openEditModal","row","_hoisted_14","openDeleteModal","_hoisted_15","_hoisted_16","_toDisplayString","formattedRow"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">Home</h1>\n\n    <!-- Modal untuk edit pengguna -->\n    <modal v-model=\"isEditModalOpen\">\n      <h2 class=\"text-xl font-semibold mb-4\">Edit User</h2>\n      <form @submit.prevent=\"updateUser\">\n        <div class=\"mb-4\">\n          <label\n            for=\"edit-username\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Username</label\n          >\n          <input\n            type=\"text\"\n            id=\"edit-username\"\n            v-model=\"editedUser.username\"\n            class=\"mt-1 p-2 border rounded-md w-full\"\n            required\n          />\n        </div>\n        <div class=\"mb-4\">\n          <label\n            for=\"edit-email\"\n            class=\"block text-sm font-medium text-gray-700\"\n            >Email</label\n          >\n          <input\n            type=\"email\"\n            id=\"edit-email\"\n            v-model=\"editedUser.email\"\n            class=\"mt-1 p-2 border rounded-md w-full\"\n            required\n          />\n        </div>\n        <div class=\"flex justify-end\">\n          <button\n            type=\"submit\"\n            class=\"bg-blue-500 text-white px-4 py-2 rounded\"\n          >\n            Update\n          </button>\n          <button\n            @click=\"closeEditModal\"\n            class=\"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </modal>\n\n    <!-- Modal untuk konfirmasi penghapusan -->\n    <modal v-model=\"isDeleteModalOpen\">\n      <h2 class=\"text-xl font-semibold mb-4\">Delete User</h2>\n      <p>Are you sure you want to delete this user?</p>\n      <div class=\"flex justify-end mt-4\">\n        <button\n          @click=\"deleteConfirmed\"\n          class=\"bg-red-500 text-white px-4 py-2 rounded\"\n        >\n          Delete\n        </button>\n        <button\n          @click=\"closeDeleteModal\"\n          class=\"bg-gray-300 text-gray-700 px-4 py-2 rounded ml-2\"\n        >\n          Cancel\n        </button>\n      </div>\n    </modal>\n\n    <!-- Tabel menggunakan vue-good-table -->\n    <vue-good-table\n      :columns=\"columns\"\n      :rows=\"apiData\"\n      :pagination-options=\"paginationOptions\"\n    >\n      <template v-slot:table-row=\"props\">\n        <span v-if=\"props.column.field === 'actions'\">\n          <button\n            @click=\"openEditModal(props.row)\"\n            class=\"bg-blue-500 text-white px-2 py-1 rounded\"\n          >\n            Edit\n          </button>\n          <button\n            @click=\"openDeleteModal(props.row.id)\"\n            class=\"bg-red-500 text-white px-2 py-1 rounded ml-2\"\n          >\n            Delete\n          </button>\n        </span>\n        <span v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </span>\n      </template>\n    </vue-good-table>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport { useAuthStore } from \"../stores/auth\";\nimport { VueGoodTable } from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\nimport { createModal } from \"vue3-modal\";\n\nexport default {\n  components: {\n    VueGoodTable,\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const apiData = ref([]);\n    const editedUser = ref({ username: \"\", email: \"\" });\n    const isEditModalOpen = ref(false);\n    const isDeleteModalOpen = ref(false);\n    const userIdToDelete = ref(null);\n\n    const columns = [\n      { label: \"Username\", field: \"username\" },\n      { label: \"Email\", field: \"email\" },\n      { label: \"Actions\", field: \"actions\", sortable: false },\n    ];\n\n    const paginationOptions = {\n      enabled: true,\n      perPage: 10,\n    };\n\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\n          \"http://103.164.54.252:8000/api/users\",\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n\n        // Mengubah struktur data dari array ke array objek yang sesuai dengan format DataTable\n        apiData.value = response.data.map((user) => ({\n          username: user.username,\n          email: user.email,\n          actions: {\n            id: user.id,\n          },\n        }));\n\n        console.log(apiData.value); // Output data ke konsol untuk memeriksa strukturnya\n      } catch (error) {\n        console.error(\"Failed to fetch data:\", error);\n      }\n    };\n\n    const openEditModal = (user) => {\n      editedUser.value = { ...user };\n      isEditModalOpen.value = true;\n    };\n\n    const closeEditModal = () => {\n      editedUser.value = { username: \"\", email: \"\" };\n      isEditModalOpen.value = false;\n    };\n\n    const updateUser = async () => {\n      try {\n        await axios.put(\n          `http://103.164.54.252:8000/api/users/${editedUser.value.id}`,\n          editedUser.value,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        closeEditModal();\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to update user:\", error);\n      }\n    };\n\n    const openDeleteModal = (userId) => {\n      userIdToDelete.value = userId;\n      isDeleteModalOpen.value = true;\n    };\n\n    const closeDeleteModal = () => {\n      userIdToDelete.value = null;\n      isDeleteModalOpen.value = false;\n    };\n\n    const deleteConfirmed = async () => {\n      try {\n        await axios.delete(\n          `http://103.164.54.252:8000/api/users/${userIdToDelete.value}`,\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        closeDeleteModal();\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to delete user:\", error);\n      }\n    };\n\n    onMounted(() => {\n      fetchData();\n    });\n\n    return {\n      columns,\n      apiData,\n      paginationOptions,\n      isEditModalOpen,\n      isDeleteModalOpen,\n      openEditModal,\n      closeEditModal,\n      updateUser,\n      openDeleteModal,\n      closeDeleteModal,\n      deleteConfirmed,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* Tambahkan style tambahan jika diperlukan */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}