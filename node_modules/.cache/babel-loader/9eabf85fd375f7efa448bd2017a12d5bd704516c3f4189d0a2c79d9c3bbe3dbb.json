{"ast":null,"code":"import _regeneratorRuntime from \"/Users/deolorensa/vue/gamatecha/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/deolorensa/vue/gamatecha/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { defineStore } from \"pinia\";\nimport axios from \"axios\";\nexport var useAuthStore = defineStore(\"auth\", {\n  state: function state() {\n    return {\n      token: localStorage.getItem(\"token\") || null,\n      username: localStorage.getItem(\"username\") || null\n    };\n  },\n  getters: {\n    isAuthenticated: function isAuthenticated(state) {\n      return state.token !== null;\n    }\n  },\n  actions: {\n    login: function login(username, password) {\n      var _this = this;\n      return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n        var response;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"http://103.164.54.252:8000/api/auth/login\", {\n                username: username,\n                password: password\n              });\n            case 3:\n              response = _context.sent;\n              _this.token = response.data.access;\n              _this.username = username;\n              localStorage.setItem(\"token\", response.data.access);\n              localStorage.setItem(\"username\", username);\n              _context.next = 14;\n              break;\n            case 10:\n              _context.prev = 10;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(\"Login failed:\", _context.t0);\n              throw _context.t0;\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, null, [[0, 10]]);\n      }))();\n    },\n    logout: function logout() {\n      this.token = null;\n      this.username = null;\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"username\");\n    }\n  }\n});","map":{"version":3,"names":["defineStore","axios","useAuthStore","state","token","localStorage","getItem","username","getters","isAuthenticated","actions","login","password","_this","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","post","sent","data","access","setItem","t0","console","error","stop","logout","removeItem"],"sources":["/Users/deolorensa/vue/gamatecha/src/stores/auth.js"],"sourcesContent":["import { defineStore } from \"pinia\";\nimport axios from \"axios\";\n\nexport const useAuthStore = defineStore(\"auth\", {\n  state: () => ({\n    token: localStorage.getItem(\"token\") || null,\n    username: localStorage.getItem(\"username\") || null,\n  }),\n  getters: {\n    isAuthenticated: (state) => state.token !== null,\n  },\n  actions: {\n    async login(username, password) {\n      try {\n        const response = await axios.post(\n          \"http://103.164.54.252:8000/api/auth/login\",\n          {\n            username,\n            password,\n          }\n        );\n        this.token = response.data.access;\n        this.username = username;\n        localStorage.setItem(\"token\", response.data.access);\n        localStorage.setItem(\"username\", username);\n      } catch (error) {\n        console.error(\"Login failed:\", error);\n        throw error;\n      }\n    },\n    logout() {\n      this.token = null;\n      this.username = null;\n      localStorage.removeItem(\"token\");\n      localStorage.removeItem(\"username\");\n    },\n  },\n});\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,OAAO;AACnC,OAAOC,KAAK,MAAM,OAAO;AAEzB,OAAO,IAAMC,YAAY,GAAGF,WAAW,CAAC,MAAM,EAAE;EAC9CG,KAAK,EAAE,SAAAA,MAAA;IAAA,OAAO;MACZC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;MAC5CC,QAAQ,EAAEF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,IAAI;IAChD,CAAC;EAAA,CAAC;EACFE,OAAO,EAAE;IACPC,eAAe,EAAE,SAAAA,gBAACN,KAAK;MAAA,OAAKA,KAAK,CAACC,KAAK,KAAK,IAAI;IAAA;EAClD,CAAC;EACDM,OAAO,EAAE;IACDC,KAAK,WAAAA,MAACJ,QAAQ,EAAEK,QAAQ,EAAE;MAAA,IAAAC,KAAA;MAAA,OAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,UAAAC,QAAA;QAAA,IAAAC,QAAA;QAAA,OAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAELtB,KAAK,CAACuB,IAAI,CAC/B,2CAA2C,EAC3C;gBACEjB,QAAQ,EAARA,QAAQ;gBACRK,QAAQ,EAARA;cACF,CACF,CAAC;YAAA;cANKM,QAAQ,GAAAG,QAAA,CAAAI,IAAA;cAOdZ,KAAI,CAACT,KAAK,GAAGc,QAAQ,CAACQ,IAAI,CAACC,MAAM;cACjCd,KAAI,CAACN,QAAQ,GAAGA,QAAQ;cACxBF,YAAY,CAACuB,OAAO,CAAC,OAAO,EAAEV,QAAQ,CAACQ,IAAI,CAACC,MAAM,CAAC;cACnDtB,YAAY,CAACuB,OAAO,CAAC,UAAU,EAAErB,QAAQ,CAAC;cAACc,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAQ,EAAA,GAAAR,QAAA;cAE3CS,OAAO,CAACC,KAAK,CAAC,eAAe,EAAAV,QAAA,CAAAQ,EAAO,CAAC;cAAC,MAAAR,QAAA,CAAAQ,EAAA;YAAA;YAAA;cAAA,OAAAR,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAAf,OAAA;MAAA;IAG1C,CAAC;IACDgB,MAAM,WAAAA,OAAA,EAAG;MACP,IAAI,CAAC7B,KAAK,GAAG,IAAI;MACjB,IAAI,CAACG,QAAQ,GAAG,IAAI;MACpBF,YAAY,CAAC6B,UAAU,CAAC,OAAO,CAAC;MAChC7B,YAAY,CAAC6B,UAAU,CAAC,UAAU,CAAC;IACrC;EACF;AACF,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}