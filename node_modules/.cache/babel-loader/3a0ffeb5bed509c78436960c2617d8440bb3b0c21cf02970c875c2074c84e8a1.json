{"ast":null,"code":"import { createRouter, createWebHistory } from \"vue-router\";\nimport { useAuthStore } from \"../stores/auth\";\nimport Login from \"../views/LoginView.vue\";\nimport Home from \"../views/HomeView.vue\";\nimport About from \"../views/AboutView.vue\";\nimport Profile from \"../views/ProfileView.vue\";\nimport AdminArticles from \"../views/AdminArticles.vue\";\nconst routes = [{\n  path: \"/\",\n  name: \"Login\",\n  component: Login\n}, {\n  path: \"/home\",\n  name: \"Home\",\n  component: Home,\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: \"/articles\",\n  name: \"About\",\n  component: About,\n  meta: {\n    requiresAuth: true,\n    requiresDemo1: true\n  }\n}, {\n  path: \"/admin-articles\",\n  name: \"AdminArticles\",\n  component: AdminArticles,\n  meta: {\n    requiresAuth: true,\n    requiresAdmin: true\n  }\n}, {\n  path: \"/profile\",\n  name: \"Profile\",\n  component: Profile,\n  meta: {\n    requiresAuth: true,\n    requiresDemo1: true\n  }\n}, {\n  path: \"/:catchAll(.*)\",\n  redirect: \"/home\" // Redirect ke halaman home jika route tidak ditemukan\n}];\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  const authStore = useAuthStore();\n  const isAuthenticated = authStore.isAuthenticated;\n  const isAdmin = authStore.username === \"admin\";\n  const isDemo1 = authStore.username === \"demo1\";\n\n  // Mengambil informasi route sebelumnya\n  const previousRoute = from;\n  if (to.meta.requiresAdmin && (!isAuthenticated || !isAdmin)) {\n    // Jika tidak memenuhi syarat admin, kembalikan ke route sebelumnya\n    next(previousRoute.fullPath || \"/home\");\n  } else if (to.meta.requiresDemo1 && (!isAuthenticated || !isDemo1)) {\n    // Jika tidak memenuhi syarat demo1, kembalikan ke route sebelumnya\n    next(previousRoute.fullPath || \"/articles\");\n  } else {\n    next();\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","useAuthStore","Login","Home","About","Profile","AdminArticles","routes","path","name","component","meta","requiresAuth","requiresAdmin","requiresDemo1","redirect","router","history","process","env","BASE_URL","beforeEach","to","from","next","authStore","isAuthenticated","isAdmin","username","isDemo1","previousRoute","fullPath"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from \"vue-router\";\nimport { useAuthStore } from \"../stores/auth\";\nimport Login from \"../views/LoginView.vue\";\nimport Home from \"../views/HomeView.vue\";\nimport About from \"../views/AboutView.vue\";\nimport Profile from \"../views/ProfileView.vue\";\nimport AdminArticles from \"../views/AdminArticles.vue\";\n\nconst routes = [\n  {\n    path: \"/\",\n    name: \"Login\",\n    component: Login,\n  },\n  {\n    path: \"/home\",\n    name: \"Home\",\n    component: Home,\n    meta: { requiresAuth: true, requiresAdmin: true },\n  },\n  {\n    path: \"/articles\",\n    name: \"About\",\n    component: About,\n    meta: { requiresAuth: true, requiresDemo1: true },\n  },\n  {\n    path: \"/admin-articles\",\n    name: \"AdminArticles\",\n    component: AdminArticles,\n    meta: { requiresAuth: true, requiresAdmin: true },\n  },\n  {\n    path: \"/profile\",\n    name: \"Profile\",\n    component: Profile,\n    meta: { requiresAuth: true, requiresDemo1: true },\n  },\n  {\n    path: \"/:catchAll(.*)\",\n    redirect: \"/home\", // Redirect ke halaman home jika route tidak ditemukan\n  },\n];\n\nconst router = createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n\nrouter.beforeEach((to, from, next) => {\n  const authStore = useAuthStore();\n  const isAuthenticated = authStore.isAuthenticated;\n  const isAdmin = authStore.username === \"admin\";\n  const isDemo1 = authStore.username === \"demo1\";\n\n  // Mengambil informasi route sebelumnya\n  const previousRoute = from;\n\n  if (to.meta.requiresAdmin && (!isAuthenticated || !isAdmin)) {\n    // Jika tidak memenuhi syarat admin, kembalikan ke route sebelumnya\n    next(previousRoute.fullPath || \"/home\");\n  } else if (to.meta.requiresDemo1 && (!isAuthenticated || !isDemo1)) {\n    // Jika tidak memenuhi syarat demo1, kembalikan ke route sebelumnya\n    next(previousRoute.fullPath || \"/articles\");\n  } else {\n    next();\n  }\n});\n\nexport default router;\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,gBAAgB,QAAQ,YAAY;AAC3D,SAASC,YAAY,QAAQ,gBAAgB;AAC7C,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,IAAI,MAAM,uBAAuB;AACxC,OAAOC,KAAK,MAAM,wBAAwB;AAC1C,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,OAAOC,aAAa,MAAM,4BAA4B;AAEtD,MAAMC,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,GAAG;EACTC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAER;AACb,CAAC,EACD;EACEM,IAAI,EAAE,OAAO;EACbC,IAAI,EAAE,MAAM;EACZC,SAAS,EAAEP,IAAI;EACfQ,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEL,IAAI,EAAE,WAAW;EACjBC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEN,KAAK;EAChBO,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEE,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEN,IAAI,EAAE,iBAAiB;EACvBC,IAAI,EAAE,eAAe;EACrBC,SAAS,EAAEJ,aAAa;EACxBK,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEC,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEL,IAAI,EAAE,UAAU;EAChBC,IAAI,EAAE,SAAS;EACfC,SAAS,EAAEL,OAAO;EAClBM,IAAI,EAAE;IAAEC,YAAY,EAAE,IAAI;IAAEE,aAAa,EAAE;EAAK;AAClD,CAAC,EACD;EACEN,IAAI,EAAE,gBAAgB;EACtBO,QAAQ,EAAE,OAAO,CAAE;AACrB,CAAC,CACF;AAED,MAAMC,MAAM,GAAGjB,YAAY,CAAC;EAC1BkB,OAAO,EAAEjB,gBAAgB,CAACkB,OAAO,CAACC,GAAG,CAACC,QAAQ,CAAC;EAC/Cb;AACF,CAAC,CAAC;AAEFS,MAAM,CAACK,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,SAAS,GAAGxB,YAAY,CAAC,CAAC;EAChC,MAAMyB,eAAe,GAAGD,SAAS,CAACC,eAAe;EACjD,MAAMC,OAAO,GAAGF,SAAS,CAACG,QAAQ,KAAK,OAAO;EAC9C,MAAMC,OAAO,GAAGJ,SAAS,CAACG,QAAQ,KAAK,OAAO;;EAE9C;EACA,MAAME,aAAa,GAAGP,IAAI;EAE1B,IAAID,EAAE,CAACX,IAAI,CAACE,aAAa,KAAK,CAACa,eAAe,IAAI,CAACC,OAAO,CAAC,EAAE;IAC3D;IACAH,IAAI,CAACM,aAAa,CAACC,QAAQ,IAAI,OAAO,CAAC;EACzC,CAAC,MAAM,IAAIT,EAAE,CAACX,IAAI,CAACG,aAAa,KAAK,CAACY,eAAe,IAAI,CAACG,OAAO,CAAC,EAAE;IAClE;IACAL,IAAI,CAACM,aAAa,CAACC,QAAQ,IAAI,WAAW,CAAC;EAC7C,CAAC,MAAM;IACLP,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAEF,eAAeR,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}