{"ast":null,"code":"import { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport { useAuthStore } from \"../stores/auth\";\nimport VueGoodTable from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\nexport default {\n  components: {\n    VueGoodTable\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const apiData = ref([]);\n    const isModalOpen = ref(false);\n    const currentUser = ref({\n      id: null,\n      username: \"\",\n      email: \"\"\n    });\n    const columns = [{\n      label: \"Username\",\n      field: \"username\"\n    }, {\n      label: \"Email\",\n      field: \"email\"\n    }, {\n      label: \"Actions\",\n      field: \"actions\",\n      sortable: false\n    }];\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\"http://103.164.54.252:8000/api/users\", {\n          headers: {\n            Authorization: `Bearer ${authStore.token}`\n          }\n        });\n\n        // Mengubah struktur data dari array ke array objek yang sesuai dengan format DataTable\n        apiData.value = response.data.map(user => ({\n          username: user.username,\n          email: user.email,\n          actions: {\n            id: user.id\n            // Anda dapat menambahkan properti lain yang diperlukan untuk aksi lainnya\n          }\n        }));\n        console.log(apiData.value); // Output data ke konsol untuk memeriksa strukturnya\n      } catch (error) {\n        console.error(\"Failed to fetch data:\", error);\n      }\n    };\n    const editUser = user => {\n      currentUser.value = {\n        ...user\n      };\n      isModalOpen.value = true;\n    };\n    const updateUser = async () => {\n      try {\n        await axios.put(`https://api.example.com/users/${currentUser.value.id}`, {\n          username: currentUser.value.username,\n          email: currentUser.value.email\n        }, {\n          headers: {\n            Authorization: `Bearer ${authStore.token}`\n          }\n        });\n        fetchData();\n        closeModal();\n      } catch (error) {\n        console.error(\"Failed to update user:\", error);\n      }\n    };\n    const deleteUser = async id => {\n      try {\n        await axios.delete(`https://api.example.com/users/${id}`, {\n          headers: {\n            Authorization: `Bearer ${authStore.token}`\n          }\n        });\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to delete user:\", error);\n      }\n    };\n    const closeModal = () => {\n      isModalOpen.value = false;\n      currentUser.value = {\n        id: null,\n        username: \"\",\n        email: \"\"\n      };\n    };\n    onMounted(() => {\n      fetchData();\n    });\n    return {\n      columns,\n      apiData,\n      isModalOpen,\n      currentUser,\n      editUser,\n      updateUser,\n      deleteUser,\n      closeModal\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","axios","useAuthStore","VueGoodTable","components","setup","authStore","apiData","isModalOpen","currentUser","id","username","email","columns","label","field","sortable","fetchData","response","get","headers","Authorization","token","value","data","map","user","actions","console","log","error","editUser","updateUser","put","closeModal","deleteUser","delete"],"sources":["/Users/deolorensa/vue/tech--gamatecha/src/views/HomeView.vue"],"sourcesContent":["<template>\n  <div class=\"container mx-auto p-6\">\n    {{ apiData }}\n    <h1 class=\"text-2xl font-bold mb-4\">Home</h1>\n    <vue-good-table\n      :columns=\"columns\"\n      :rows=\"apiData\"\n      :search-options=\"{ enabled: true }\"\n      :pagination-options=\"{ enabled: true, perPage: 10 }\"\n    >\n      <template v-slot:table-row=\"props\">\n        <span v-if=\"props.column.field === 'actions'\">\n          <button\n            @click=\"editUser(props.row)\"\n            class=\"bg-blue-500 text-white px-2 py-1 rounded\"\n          >\n            Edit\n          </button>\n          <button\n            @click=\"deleteUser(props.row.id)\"\n            class=\"bg-red-500 text-white px-2 py-1 rounded ml-2\"\n          >\n            Delete\n          </button>\n        </span>\n        <span v-else>\n          {{ props.formattedRow[props.column.field] }}\n        </span>\n      </template>\n    </vue-good-table>\n  </div>\n\n  <!-- Modal for editing user -->\n  <div\n    v-if=\"isModalOpen\"\n    class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\"\n  >\n    <div class=\"bg-white p-6 rounded-lg shadow-lg\">\n      <h2 class=\"text-xl font-bold mb-4\">Edit User</h2>\n      <form @submit.prevent=\"updateUser\">\n        <div class=\"mb-4\">\n          <label class=\"block text-gray-700\">Username</label>\n          <input\n            v-model=\"currentUser.username\"\n            type=\"text\"\n            class=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-200\"\n          />\n        </div>\n        <div class=\"mb-4\">\n          <label class=\"block text-gray-700\">Email</label>\n          <input\n            v-model=\"currentUser.email\"\n            type=\"email\"\n            class=\"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-indigo-200\"\n          />\n        </div>\n        <div class=\"flex items-center justify-between\">\n          <button\n            type=\"submit\"\n            class=\"bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-200\"\n          >\n            Save\n          </button>\n          <button\n            @click=\"closeModal\"\n            type=\"button\"\n            class=\"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200\"\n          >\n            Cancel\n          </button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from \"vue\";\nimport axios from \"axios\";\nimport { useAuthStore } from \"../stores/auth\";\nimport VueGoodTable from \"vue-good-table-next\";\nimport \"vue-good-table-next/dist/vue-good-table-next.css\";\n\nexport default {\n  components: {\n    VueGoodTable,\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const apiData = ref([]);\n    const isModalOpen = ref(false);\n    const currentUser = ref({ id: null, username: \"\", email: \"\" });\n\n    const columns = [\n      { label: \"Username\", field: \"username\" },\n      { label: \"Email\", field: \"email\" },\n      { label: \"Actions\", field: \"actions\", sortable: false },\n    ];\n\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(\n          \"http://103.164.54.252:8000/api/users\",\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n\n        // Mengubah struktur data dari array ke array objek yang sesuai dengan format DataTable\n        apiData.value = response.data.map((user) => ({\n          username: user.username,\n          email: user.email,\n          actions: {\n            id: user.id,\n            // Anda dapat menambahkan properti lain yang diperlukan untuk aksi lainnya\n          },\n        }));\n\n        console.log(apiData.value); // Output data ke konsol untuk memeriksa strukturnya\n      } catch (error) {\n        console.error(\"Failed to fetch data:\", error);\n      }\n    };\n\n    const editUser = (user) => {\n      currentUser.value = { ...user };\n      isModalOpen.value = true;\n    };\n\n    const updateUser = async () => {\n      try {\n        await axios.put(\n          `https://api.example.com/users/${currentUser.value.id}`,\n          {\n            username: currentUser.value.username,\n            email: currentUser.value.email,\n          },\n          {\n            headers: {\n              Authorization: `Bearer ${authStore.token}`,\n            },\n          }\n        );\n        fetchData();\n        closeModal();\n      } catch (error) {\n        console.error(\"Failed to update user:\", error);\n      }\n    };\n\n    const deleteUser = async (id) => {\n      try {\n        await axios.delete(`https://api.example.com/users/${id}`, {\n          headers: {\n            Authorization: `Bearer ${authStore.token}`,\n          },\n        });\n        fetchData();\n      } catch (error) {\n        console.error(\"Failed to delete user:\", error);\n      }\n    };\n\n    const closeModal = () => {\n      isModalOpen.value = false;\n      currentUser.value = { id: null, username: \"\", email: \"\" };\n    };\n\n    onMounted(() => {\n      fetchData();\n    });\n\n    return {\n      columns,\n      apiData,\n      isModalOpen,\n      currentUser,\n      editUser,\n      updateUser,\n      deleteUser,\n      closeModal,\n    };\n  },\n};\n</script>\n\n<style scoped>\n/* Tambahkan style tambahan jika diperlukan */\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}